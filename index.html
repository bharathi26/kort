<!DOCTYPE HTML>
<html manifest="" lang="de-CH">
<head>
    <meta charset="UTF-8">
    <title>Kort</title>
    <link rel="icon" href="./resources/images/kort-favicon.ico" type="image/png" />
    <script type="text/javascript">
        // create namespace
        var KortStartscreen = {};
        KortStartscreen.supportedLanguages = ['en', 'de', 'it', 'fr', 'sl', 'hr', 'cs', 'nl', 'gl', 'pt', 'ro'];
        KortStartscreen.supportedBrowsers = ['WebKit'];
        KortStartscreen.defaultLanguage = 'en';
        
        KortStartscreen.getLanguage = function() {
            var currentLang = (navigator.language || navigator.browserLanguage || navigator.userLanguage || KortStartscreen.defaultLanguage),
                supportedLanguages = KortStartscreen.supportedLanguages,
                langLen = supportedLanguages.length,
                i;

            currentLang = currentLang.substring(0, 2).toLowerCase();
            for(i = 0; i < langLen; i++) {
                if (supportedLanguages[i] === currentLang) {
                    return currentLang;
                }
            }
            return KortStartscreen.defaultLanguage;
        }
        
        KortStartscreen.isBrowserSupported = function() {
            var supportedBrowsers = KortStartscreen.supportedBrowsers,
                supportedBrowsersLen = supportedBrowsers.length,
                i;

            for(i = 0; i < supportedBrowsersLen; i++) {
                if(Ext.browser.is(supportedBrowsers[i])) {
                    return true;
                }
            }
            return false;
        }

        KortStartscreen.lang = KortStartscreen.getLanguage();
        KortStartscreen.messages = {
            de: {
                'startscreen.loadingtext': 'Kort wird geladen. Gleich gehts los...',
                'startscreen.browsererror': 'Dein Browser wird leider nicht unterstützt. Kort ist optimiert für den Betrieb auf mobilen Geräten. Versuch es doch damit.'
            },
            en: {
                'startscreen.loadingtext': 'Kort is loading. Get ready...',
                'startscreen.browsererror': 'Your browser is not supported. Try it on your mobile phone.'
            },
            it: {
                'startscreen.loadingtext': 'Kort is loading. Get ready...',
                'startscreen.browsererror': 'Your browser is not supported. Try it on your mobile phone.'
            },
            fr: {
                'startscreen.loadingtext': 'Kort is loading. Get ready...',
                'startscreen.browsererror': 'Your browser is not supported. Try it on your mobile phone.'
            },
            sl: {
                'startscreen.loadingtext': 'Kort is loading. Get ready...',
                'startscreen.browsererror': 'Your browser is not supported. Try it on your mobile phone.'
            },
            hr: {
                'startscreen.loadingtext': 'Kort is loading. Get ready...',
                'startscreen.browsererror': 'Your browser is not supported. Try it on your mobile phone.'
            },
            cs: {
                'startscreen.loadingtext': 'Kort is loading. Get ready...',
                'startscreen.browsererror': 'Your browser is not supported. Try it on your mobile phone.'
            },
            nl: {
                'startscreen.loadingtext': 'Kort is loading. Get ready...',
                'startscreen.browsererror': 'Your browser is not supported. Try it on your mobile phone.'
            },
            gl: {
                'startscreen.loadingtext': 'Kort is loading. Get ready...',
                'startscreen.browsererror': 'Your browser is not supported. Try it on your mobile phone.'
            },
            pt: {
                'startscreen.loadingtext': 'Kort is loading. Get ready...',
                'startscreen.browsererror': 'Your browser is not supported. Try it on your mobile phone.'
            },
            ro: {
                'startscreen.loadingtext': 'Kort se încarcă. Pregătiți-vă...',
                'startscreen.browsererror': 'Your browser is not supported. Try it on your mobile phone.'
            }
        }
        
        KortStartscreen.init = function() {
            KortStartscreen.setLanguage();
            KortStartscreen.detectBrowser();
        }
        
        KortStartscreen.getMessage = function(key) {
            return KortStartscreen.messages[KortStartscreen.lang][key];
        }
        
        KortStartscreen.setLanguage = function() {
            if(document.getElementById('startscreen-loading-text')) {
                document.getElementById('startscreen-loading-text').innerHTML = KortStartscreen.getMessage('startscreen.loadingtext');
            }
        }
        KortStartscreen.detectBrowser = function() {
            if(!KortStartscreen.isBrowserSupported()) {
                document.getElementById('startscreen-kort-logo').innerHTML = '<img src="./resources/images/kort-logo.png" />';
                document.getElementById('appStartscreen').style.backgroundColor = '#eee';
                document.getElementById('appStartscreen').style.color = '#000';
                document.getElementById('startscreen-loading-content').innerHTML =
                    '<div class="sadsmiley">:(</div>' +
                    '<div class="browser-error">' +
                        KortStartscreen.getMessage('startscreen.browsererror') +
                    '</div>';
            }
        }
    </script>
    <style type="text/css">
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: "Helvetica Neue", HelveticaNeue, "Helvetica-Neue", Helvetica, "BBAlpha Sans", sans-serif;
        }
        #appStartscreen {
            font-size: 18px !important;
            height: 100%;
            background-color: #395971;
            color: #fff;
            padding: 1.5em 0.5em 0.5em 0.5em;
            text-align: center;
        }
        #appStartscreen #startscreen-kort-logo img {
            width: 150px;
            height: 150px;
        }
        #appStartscreen #startscreen-loading-content #startscreen-loading-text,
        #appStartscreen #startscreen-loading-content .browser-error {
            font-size: 0.9em;
            margin: 1.5em 0.8em 0 0.8em;
        }
        #appStartscreen #startscreen-loading-content #startscreen-loading-text {
            text-transform: uppercase;
        }
        #appStartscreen #startscreen-loading-content .loading-spinner {
            margin-top: 1em;
        }
        #appStartscreen #startscreen-loading-content .sadsmiley {
            font-size: 4em;
        }
    </style>

    <!-- The line below must be kept intact for Sencha Command to build your application -->
    <script id="microloader" type="text/javascript" src="touch/microloader/development.js"></script>
</head>
<body onload="KortStartscreen.init()">
    <div id="appStartscreen">
        <div id="startscreen-kort-logo">
            <img src="./resources/images/kort-logo_white.png" />
        </div>
        <div id="startscreen-loading-content">
            <p id="startscreen-loading-text">Kort wird geladen. Gleich gehts los...</p>
            <div class="loading-spinner"><img src="./resources/images/ajax-loader.gif" /></div>
        </div>
    </div>
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-37644286-1']);
        _gaq.push(['_trackPageview']);

        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
  </script>
</body>
</html>